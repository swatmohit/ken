jQuery(document).ready(function($){var current_site_id=$('body').attr('data-current-site-id');var current_site_url=$('body').attr('data-current-site-url');$('body').on('click','.save-icon, .save-story',function(e){e.preventDefault();var edition_id="";var This=$(this);var story_id=$(this).attr('data-story-id');edition_id=$(this).attr('data-story-edition');var is_delete=false;if(This.hasClass('active')){is_delete=true;}else{is_delete=false;}
var data={action:'save_story',story_id:story_id,edition_id:edition_id,is_delete:is_delete};$.post(ajaxurl,data,function(response){response=response.slice(0,-1).trim();if(This.hasClass('active')){This.removeClass('active');}else{This.addClass('active');}});});$('.article-follow').click(function(e){e.preventDefault();var edition_id="";var This=$(this);var narrative_id=$(this).attr('data-narrative-id');var is_delete=false;if(This.hasClass('following')){is_delete=true;}else{is_delete=false;}
var data={action:'follow_narrative',narrative_id:narrative_id,is_delete:is_delete};$.post(ajaxurl,data,function(response){response=response.slice(0,-1).trim();if(This.hasClass('following')){This.removeClass('following');This.text('follow');}else{This.addClass('following');This.text('following');}
console.log(response);});});$('.edition_toggle').on('change',function(){var edition_id=this.value;var data={action:'set_preferred_edition',edition_id:edition_id};$.post(tkmultisitethemecodes_response_ajax_script.ajaxurl,data,function(response){response=response.slice(0,-1).trim();location.href=response;});});$('.select-country label').click(function(){var edition_id=$(this).attr('data-edition-id');var data={action:'set_preferred_edition',edition_id:edition_id};$.post(tkmultisitethemecodes_response_ajax_script.ajaxurl,data,function(response){response=response.slice(0,-1).trim();location.href=response;});});const homeSubscribeForm=$('#home-subscribe-form');const homeSubscribeFormbtn=$('#home-subscribe-form button');var homeSubscribeFormValidation=homeSubscribeForm.validate({rules:{header_signup_email:{required:true,email:true},},submitHandler:function(form){homeSubscribeFormbtn.addClass('loader-overlay');jQuery.ajax({type:'POST',url:ajaxurl,data:{action:'header_subscribe_verification',data:homeSubscribeForm.serialize()},success:function(data,textStatus,XMLHttpRequest){homeSubscribeFormbtn.removeClass('loader-overlay');data=data.slice(0,-1).trim();console.log(data);if(data=="mail_exists"){var login_email=$('#home-subscribe-form input[type="email"]').val();jQuery('#login-modal').modal('show');jQuery('#login-modal input[type="email"]').val(login_email);window.history.pushState(null,null,current_site_url+'/pricing#see-personal-plans');}
else{var signup_email=$('#home-subscribe-form input[type="email"]').val();$('#home-subscribe-form input[type="email"]').val('');jQuery('#registration-verication-modal').modal('show');$('#registration-verication-modal #verification_notice').text('Almost done. A confirmation email has been sent to '+signup_email+'. Click on the link in the email to activate your account');setTimeout(function(){window.location.href=current_site_url+'/pricing/';},2000);}},error:function(errorThrown){homeSubscribeFormbtn.parent().removeClass('loader-overlay');}});},});const homeBottomSubscribeForm=$('#bottom-subscribe-form');const homeBottomSubscribeFormbtn=$('#bottom-subscribe-form button');var homeBottomSubscribeFormValidation=homeBottomSubscribeForm.validate({rules:{header_signup_email:{required:true,email:true},},submitHandler:function(form){homeBottomSubscribeFormbtn.addClass('loader-overlay');jQuery.ajax({type:'POST',url:ajaxurl,data:{action:'header_subscribe_verification',data:homeBottomSubscribeForm.serialize()},success:function(data,textStatus,XMLHttpRequest){homeBottomSubscribeFormbtn.removeClass('loader-overlay');data=data.slice(0,-1).trim();console.log(data);if(data=="mail_exists"){var login_email=$('#bottom-subscribe-form input[type="email"]').val();jQuery('#login-modal').modal('show');jQuery('#login-modal input[type="email"]').val(login_email);window.history.pushState(null,null,current_site_url+'/pricing#see-personal-plans');}
else{var signup_email=$('#bottom-subscribe-form input[type="email"]').val();$('#bottom-subscribe-form input[type="email"]').val('');jQuery('#registration-verication-modal').modal('show');$('#registration-verication-modal #verification_notice').text('Almost done. A confirmation email has been sent to '+signup_email+'. Click on the link in the email to activate your account');setTimeout(function(){window.location.href=current_site_url+'/pricing/';},2000);}},error:function(errorThrown){homeBottomSubscribeFormbtn.parent().removeClass('loader-overlay');}});},});const homeOptinForm=$('#home-optin-form');const homeOptinFormFormbtn=$('#home-optin-form button');var homeOptinFormValidation=homeOptinForm.validate({rules:{header_signup_email:{required:true,email:true},},submitHandler:function(form){homeOptinFormFormbtn.addClass('loader-overlay');jQuery.ajax({type:'POST',url:ajaxurl,data:{action:'edition_opt_in',data:homeOptinForm.serialize()},success:function(data,textStatus,XMLHttpRequest){homeOptinFormFormbtn.removeClass('loader-overlay');data=data.slice(0,-1).trim();console.log(data);jQuery('#general-success-meaage-modal').modal('show');$('#general-success-meaage-modal p').text('Done! Thanks for opting-in!');setTimeout(function(){location.reload();},2000);},error:function(errorThrown){homeOptinFormValidation.removeClass('loader-overlay');}});},});jQuery('.modal-header .close').click(function(){jQuery('.modal-backdrop.in').remove();jQuery('.modal-backdrop.show').remove();})});